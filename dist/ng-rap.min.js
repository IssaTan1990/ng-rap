angular.module("ngRap",[]).provider("ngRap",[function(){var a=this;this.enable=function(){this.enabled=!0},this.$get=["$q",function(b){function c(){var c=b.defer(),d=document.createElement("script");return d.src=a.script,d.onload=d.onreadystatechange=function(a,b){(b||!d.readyState||/loaded|complete/.test(d.readyState))&&(d.onload=d.onreadystatechange=null,d=void 0,b||c.resolve())},document.body.appendChild(d),c.promise}var d={intercept:function(a){var b=RAP.getMode(),c=RAP.getWhiteList(),d=RAP.getBlackList(),e=a.url,f="http://"+RAP.getHost()+"/mockjsdata/"+RAP.getProjectId()+e;switch(b){case 0:break;case 1:a.mocked=!0,a.url=f;break;case 2:-1==d.indexOf(e)&&(a.mocked=!0,a.url=f);break;case 3:-1!=c.indexOf(e)&&(a.mocked=!0,a.url=f)}return a},loaded:a.enabled&&c().then(function(){var a=window.location.search.match(/mock=?(\d)?/),b=a?+a[1]:0;window.RAP&&RAP.setMode(b)})};return d}]}]).config(["$httpProvider",function(a){a.interceptors.unshift("rapMockInterceptor")}]).factory("rapMockInterceptor",["ngRap",function(a){return{request:function(b){return a.loaded?a.loaded.then(function(){return a.intercept(b)}):b}}}]);